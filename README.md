# Irisa.SpecialBonus

ุณุงูุงููู ยซูพุงุฏุงุด ูฺูยป ุจุฑุง **ูุนุงููุช ุณุณุชูโูุง ุงุทูุงุนุงุช (ISD)** ุดุฑฺฉุช ุงุฑุณุงุ ุจุง ูุฏู ุฌุงฺฏุฒู ูุงูโูุง ุงฺฉุณู ูุนู ู ูุฑุงูู ฺฉุฑุฏู:
- ูุญุงุณุจูู ูุงูุงููู ูพุงุฏุงุด ูฺู ุจูโุงุฒุง ูุฑ ฺฏุฑูู ุชุฎุตุต
- ูฺฏูุฏุงุฑ ุณูุงุจู ูุญุงุณุจุงุช ุฏุฑ ุฏูุฑูโูุง ูุฎุชูู
- ฺฉูุชุฑู ุฏูู ุณุทุญ ุฏุณุชุฑุณ ู ุฌููฺฏุฑ ุงุฒ ุงูุดุง ุงุทูุงุนุงุช ุญุณุงุณ
- ุซุจุช ูุงฺฏ ุงุฒ ุนููฺฉุฑุฏ ฺฉุงุฑุจุฑุงู

---

## ๐ฏ ุงูุฏุงู ู ฺฉุงุฑุจุฑุฏ ุณุณุชู

- **ุญุฐู ุงฺฉุณู ุฏุณุช** ู ุฌููฺฏุฑ ุงุฒ ฺฏุฑุฏุด ูุงู ุจู ุงูุฑุงุฏ ูุฎุชูู
- **ุชูุฑฺฉุฒ ูุญุงุณุจุงุช** ูพุงุฏุงุด ูฺู ูุฑ ูุนุงููุช ุจุฑ ุงุณุงุณ:
  - ุจูุฏุฌูู ูุงูุงููู ูพุงุฏุงุด ูฺู ูุนุงููุช
  - ุถุฑุงุจ ุงุฑุฒุงุจ ูุฏุฑุช (ฑตูช ูุฒู ฺฉู)
  - ุถุฑุงุจ ุงุฑุฒุงุจ ูู (ธตูช ูุฒู ฺฉู)
  - ุชุนุฏุงุฏ ููุฑุงุช ูุฑ ฺฏุฑูู ุฏุฑ ุฏูุฑู
- **ุชูฺฉฺฉ ููุดโูุง**:
  - ูุฑ ุดุงุฎุต ููุท ุชูุณุท ยซูุฑุฏ ูุฌุงุฒยป ูุฑุจูุท ุจู ููุงู ุดุงุฎุต ุชฺฉูู ูโุดูุฏ.
  - ูุนุงููุช ูโุชูุงูุฏ ุถุฑุงุจ ูุฏุฑุช ู ุญุช ุถุฑุงุจ ุฏฺฏุฑุงู ุฑุง ุงุตูุงุญ ฺฉูุฏ.
- **ูฺฏูุฏุงุฑ ุณูุงุจู ูุงูุงูู** ุจุฑุง ฺฏุฒุงุฑุดโฺฏุฑ ุฏุฑ ุฏูุฑูโูุง ูุฎุชูู.
- **ุงุชุตุงู ุจู ERP** (ุฏุฑ ุขูุฏู) ุจุฑุง ุฏุฑุงูุช ุณุงุฎุชุงุฑ ุณุงุฒูุงู: ูุนุงููุชโูุงุ ฺฏุฑููโูุง ุชุฎุตุตุ ูุฏุฑุงู ู ฺฉุงุฑุดูุงุณุงู.

---

## ๐๏ธ ูุนูุงุฑ ู ุชฺฉููููฺโูุง

- **Backend**:  
  - ASP.NET Core Web API (`net9.0`)  
  - ุงุญุฑุงุฒ ููุช ู ููุดโูุง: **ASP.NET Core Identity + EF Core**  
  - ุฏุงุฏูโูุง ุฏุงููู ู ูุญุงุณุจุงุช: **Dapper** ู Stored Procedure/Query  
  - ุงุญุฑุงุฒ ููุช ุณุฑูุณโูุง: **JWT Bearer Token**

- **Database**:
  - SQL Server  
  - Identity Tables (AspNetUsers, AspNetRoles, ...)  
  - ุฌุฏุงูู ุฏุงููู:
    - `Deputies`, `SpecialtyGroups`, `RewardPeriods`
    - `Indicators`, `IndicatorValues`
    - `PeriodGroupSnapshots` (ุงุณููพโุดุงุช ุชุนุฏุงุฏ ููุฑุงุช ุฏุฑ ูุฑ ุฏูุฑู)
    - `ManagerialCoefficients` (ุถุฑุงุจ ูุฏุฑุช ุจู ุชูฺฉฺฉ ฺฏุฑูู ู ุฏูุฑู)
    - `GroupRewardResults` (ูุชุงุฌ ููุง ูพุงุฏุงุด ฺฏุฑููโูุง)
    - `AuditLogs` (ุซุจุช ุฑูุฏุงุฏูุง ููู)

- **Frontend**:
  - HTML + **Bootstrap 5 (CDN)**
  - **jQuery (CDN)**  
  - ูุงูโูุง ุงุณุชุงุชฺฉ ุฏุฑ `wwwroot`:
    - `/css/styles.css`
    - `/js/api.js`, `/js/auth.js`, `/js/ui.js`
    - `/pages/login.html`, `/pages/dashboard.html`, ...
  - ูุฑุงูุช ูุณุชููุงู ุชูุณุท ุฎูุฏ ASP.NET Core ูุงุณุช ูโุดูุฏ (UseStaticFiles).

---

## ๐ค ููุดโูุง ู ุณุทูุญ ุฏุณุชุฑุณ

### 1. SystemAdmin (ุฑุงูุจุฑ ุณุณุชู)

**ูุธุงู ู ูุงุจูุชโูุง:**

- ูุฏุฑุช ุชุนุงุฑู ูพุงู:
  - ุชุนุฑู ูุนุงููุชโูุง
  - ูุฏุฑุช ฺฏุฑููโูุง ุชุฎุตุต
  - ุชุนุฑู ุดุงุฎุตโูุง (Indicators)
    - ุชุนู ูุฒู (Weight) ูุฑ ุดุงุฎุต
    - ุชุนู ุญุฏ ุจุงูุง/ูพุงู ูุฌุงุฒ
    - ุชุนู ฺฉุงุฑุจุฑ ูุณุฆูู ูุฑูุฏ ุงุทูุงุนุงุช ุดุงุฎุต
- ูุฏุฑุช ฺฉุงุฑุจุฑุงู ู ููุดโูุง (ุงุฒ ุทุฑู Identity / DB):
  - ุงุฎุชุตุงุต ููุดโูุง `SystemAdmin`, `Deputy`, `IndicatorDataEntry`, `GroupManager`
- ูุดุงูุฏูู ฺฏุฒุงุฑุดโูุง ู ูุงฺฏ ุณุณุชู (Audit).

> ุงู ููุด ูุนูุงู ุจุฑุง ุฑุงูโุงูุฏุงุฒ ู ูพุดุชุจุงู ุณุงูุงูู ุงุณุชูุงุฏู ูโุดูุฏ.

---

### 2. Deputy (ูุนุงููุช)

**ฺฉุงุฑุจุฑ ุงุตู ุจุฑุง ูุนุงููุช ุณุณุชูโูุง ุงุทูุงุนุงุช (ISD)**

**ูุงุจูุชโูุง:**

- ุชุนุฑู ู ูุฏุฑุช ุฏูุฑูโูุง ูพุงุฏุงุด (`RewardPeriods`):
  - ุณุงู ู ูุงู (ุชููู ุดูุณ)
  - ุนููุงู ุฏูุฑู (ูุซูุงู ยซุดูุฑูุฑ 1404ยป)
  - ูุงุฑุฏ ฺฉุฑุฏู ยซุจูุฏุฌูู ูพุงุฏุงุด ูฺู ูุนุงููุชยป ุฏุฑ ุขู ูุงู
- ูุฏุฑุช ุถุฑุจ ูุฏุฑุช (`ManagerialCoefficients`) ุจุฑุง ูุฑ ฺฏุฑูู:
  - ุชุนู ุถุฑุจ ูุฏุฑุช (ฑตูช ูุฒู ฺฉู)
  - ูุดุงูุฏู ู ุฏุฑ ุตูุฑุช ูุงุฒ ุงุตูุงุญ ููุงุฏุฑ ุถุฑุงุจ ูู ุฏฺฏุฑุงู
- ูุดุงูุฏูู ฺฉููู ุถุฑุงุจ:
  - ุถุฑุงุจ ูู ุซุจุชโุดุฏู ุชูุณุท ฺฉุงุฑุจุฑุงู ููุด `IndicatorDataEntry`
  - ุชุนุฏุงุฏ ููุฑุงุช ูุฑ ฺฏุฑูู ุฏุฑ ุงุณููพโุดุงุช ุฏูุฑู
- ุงุฌุฑุง **ูุญุงุณุจูู ูพุงุฏุงุด ูฺู**:
  - ูุญุงุณุจู ุถุฑุจ ููุง ูุฑ ฺฏุฑูู
  - ูุญุงุณุจู ูพุงุฏุงุด ูฺู ูุฑ ฺฏุฑูู
  - ูุญุงุณุจู ยซูพุงุฏุงุด ูุงุฏู ดทยป ูุฏุฑุงู ฺฏุฑูู
  - ุงุทููุงู ุงุฒ ุจุฑุงุจุฑ ุจูุฏู ุฌูุน ูพุงุฏุงุด ฺฏุฑููโูุง ุจุง ุจูุฏุฌูู ูุนุงููุช
- ููู ฺฉุฑุฏู ุฏูุฑู (`IsLocked = true`) ูพุณ ุงุฒ ุชุฃุฏ ููุง
- ฺฏุฒุงุฑุดโฺฏุฑ ุงุฒ ูููู ุฏูุฑูโูุง ู ุฎุฑูุฌ ุงฺฉุณู (ุฏุฑ ุขูุฏู).

---

### 3. IndicatorDataEntry (ฺฉุงุฑุจุฑุงู ูุงุฑุฏฺฉููุฏู ุถุฑุงุจ ุดุงุฎุตโูุง)

**ูุฑ ุดุงุฎุต ูู** ุจู ฺฉ ฺฉุงุฑุจุฑ ุจุง ููุด `IndicatorDataEntry` ููุชุณุจ ูโุดูุฏ.

**ูุงุจูุชโูุง:**

- ูุฑูุฏ ุจู ุณุงูุงูู ุจุง ูุงู ฺฉุงุฑุจุฑ/ูพุณูุฑุฏ ุฎูุฏ
- ุงูุชุฎุงุจ ุฏูุฑู ู ฺฏุฑูู ุชุฎุตุต
- ูุงุฑุฏ ฺฉุฑุฏู ููุฑู/ุถุฑุจ ุดุงุฎุต ูุฑุจูุท ุจู ุฎูุฏ:
  - ูุซุงู: ยซูุดุงุฑฺฉุช ุฏุฑ ุงุฑุชูุง ุดุงุฎุตโูุง ุชุงุจูู ุงูุฏุงู ูุนุงููุชยป
  - ูุซุงู: ยซุจูุจูุฏ ุดุงุฎุตโูุง ุฏุฑุฎูุงุณุชโูุง ูพุดุชุจุงู ูพุฑูฺูโูุงยป
  - ูุซุงู: ยซุจูุจูุฏ ุดุงุฎุตโูุง ุฏุฑุฎูุงุณุชโูุง ุชูุณุนู ูพุฑูฺูโูุงยป
  - ูุซุงู: ยซูพุฑูฺู ุจุงุฒุทุฑุงุญ IS Suite ุจุง ุชฺฉููููฺ APEXยป
- ูุดุงูุฏูู ุณูุงุจู ุฏูุฑูโูุง ฺฏุฐุดุชู ุจุฑุง ููุงู ุดุงุฎุต ู ฺฏุฑููโูุง.
- **ุนุฏู ุฏุณุชุฑุณ** ุจู ุณุงุฑ ุถุฑุงุจ ู ุงุทูุงุนุงุช ูพุงุฏุงุด ุณุงุฑ ุดุงุฎุตโูุง/ฺฏุฑููโูุง.

---

### 4. GroupManager (ูุฏุฑ ฺฏุฑูู ุชุฎุตุต)

**ูุงุจูุชโูุง:**

- ูุฑูุฏ ุจู ุณุงูุงูู ุจุง ููุด `GroupManager`
- ูุดุงูุฏูู ุงุทูุงุนุงุช ูุฑุจูุท ุจู ฺฏุฑูู ุฎูุฏ:
  - ุถุฑุงุจ ูุฏุฑุช ู ูู ุงุนูุงูโุดุฏู
  - ุถุฑุจ ููุง ฺฏุฑูู
  - ูพุงุฏุงุด ูฺู ุชูุฒุน ฺฏุฑูู ุฏุฑ ูุฑ ุฏูุฑู
  - ููุฏุงุฑ ยซูพุงุฏุงุด ูุงุฏู ดทยป ูุฎุชุต ูุฏุฑ ฺฏุฑูู
- ูุดุงูุฏูู ุณูุงุจู ุฏูุฑูโูุง ฺฏุฐุดุชู ุจุฑุง ฺฏุฑูู ุฎูุฏ.
- **ุนุฏู ุงูฺฉุงู ูุฑุงุด** ุถุฑุงุจ ู ุฏุงุฏูโูุง (Read-Only ุจุฑุง ูุชุงุฌ).

---

## ๐งช ฺฉุงุฑุจุฑุงู ุชุณุช (Seed Data)

ุฏุฑ ฺฉูุงุณ `DatabaseSeeder` ฺูุฏ ููุด ู ฺฉุงุฑุจุฑ ุชุณุช ุงุฌุงุฏ ูโุดูุฏ.  
**ุฑูุฒ ุนุจูุฑ ูููู ฺฉุงุฑุจุฑุงู ุชุณุช:**

```text
Test@12345

ููุดโูุง (Roles)

SystemAdmin

Deputy

IndicatorDataEntry

GroupManager

| ููุด                | Username                  | Email                                 | ุชูุถุญ                                         |
| ------------------ | ------------------------- | ------------------------------------- | --------------------------------------------- |
| SystemAdmin        | `admin`                   | `admin@irisa.local`                   | ุฑุงูุจุฑ ุณุณุชู                                   |
| Deputy             | `deputy.is`               | `deputy.is@irisa.local`               | ูุนุงูู ISD                                     |
| IndicatorDataEntry | `indicator.participation` | `indicator.participation@irisa.local` | ุดุงุฎุต ูุดุงุฑฺฉุช ุฏุฑ ุงุฑุชูุง ุดุงุฎุตโูุง ุชุงุจูู ุงูุฏุงู    |
| IndicatorDataEntry | `indicator.support`       | `indicator.support@irisa.local`       | ุดุงุฎุต ุจูุจูุฏ ุฏุฑุฎูุงุณุชโูุง ูพุดุชุจุงู               |
| IndicatorDataEntry | `indicator.dev`           | `indicator.dev@irisa.local`           | ุดุงุฎุต ุจูุจูุฏ ุฏุฑุฎูุงุณุชโูุง ุชูุณุนู                  |
| IndicatorDataEntry | `indicator.apex`          | `indicator.apex@irisa.local`          | ุดุงุฎุต ูพุฑูฺู ุจุงุฒุทุฑุงุญ IS Suite ุจุง ุชฺฉููููฺ APEX |
| GroupManager       | `gm.accounting`           | `gm.accounting@irisa.local`           | ูุฏุฑ ฺฏุฑูู ุญุณุงุจุฏุงุฑ                            |
| GroupManager       | `gm.production`           | `gm.production@irisa.local`           | ูุฏุฑ ฺฏุฑูู ุชููุฏ                               |
| GroupManager       | `gm.commerce`             | `gm.commerce@irisa.local`             | ูุฏุฑ ฺฏุฑูู ุจุงุฒุฑฺฏุงู                            |
| GroupManager       | `gm.it`                   | `gm.it@irisa.local`                   | ูุฏุฑ ฺฏุฑูู IT                                  |


ุฏุงุฏูโูุง ุฏุงูููู ุงููู (Seed Domain Data)

ุจุฑุง ุชุณุช ูุญุงุณุจุงุชุ Seeder ุฏุงุฏูโูุง ุฒุฑ ุฑุง ูุงุฑุฏ ูโฺฉูุฏ:

ูุนุงููุช:

Deputies โ ฺฉุฏ: ISDุ ูุงู: ยซูุนุงููุช ุณุณุชูโูุง ุงุทูุงุนุงุชยป

ฺฏุฑููโูุง ุชุฎุตุต (SpecialtyGroups):

ACCT โ ยซฺฏุฑูู ุญุณุงุจุฏุงุฑยป โ ูุฏุฑ: gm.accounting

PROD โ ยซฺฏุฑูู ุชููุฏยป โ ูุฏุฑ: gm.production

COMM โ ยซฺฏุฑูู ุจุงุฒุฑฺฏุงูยป โ ูุฏุฑ: gm.commerce

IT โ ยซฺฏุฑูู ุขโุชยป โ ูุฏุฑ: gm.it

ุฏูุฑูู ุชุณุช:

RewardPeriods โ ุณุงู: 1404ุ ูุงู: 6ุ ุนููุงู: ยซุดูุฑูุฑ 1404ยป

ุจูุฏุฌู ูพุงุฏุงุด: 1,000,000,000 ุฑุงู

ุดุงุฎุตโูุง (Indicators):

PART โ ูุดุงุฑฺฉุช ุฏุฑ ุงุฑุชูุง ุดุงุฎุตโูุง ุชุงุจูู ุงูุฏุงู ูุนุงููุช โ ูุฒู: 0.30

SUPP โ ุจูุจูุฏ ุดุงุฎุตโูุง ุฏุฑุฎูุงุณุชโูุง ูพุดุชุจุงู ูพุฑูฺูโูุง โ ูุฒู: 0.25

DEV โ ุจูุจูุฏ ุดุงุฎุตโูุง ุฏุฑุฎูุงุณุชโูุง ุชูุณุนู ูพุฑูฺูโูุง โ ูุฒู: 0.25

APEX โ ูพุฑูฺู ุจุงุฒุทุฑุงุญ IS Suite ุจุง ุชฺฉููููฺ APEX โ ูุฒู: 0.20

ุงุณููพโุดุงุช ุชุนุฏุงุฏ ููุฑุงุช (PeriodGroupSnapshots) โ ูุซุงู:

ุญุณุงุจุฏุงุฑ: 5 ููุฑุ ุชููุฏ: 7 ููุฑุ ุจุงุฒุฑฺฏุงู: 4 ููุฑุ IT: 6 ููุฑ

ุถุฑุงุจ ูุฏุฑุช (ManagerialCoefficients) โ ูุซุงู:

ุญุณุงุจุฏุงุฑ: 1.05ุ ุชููุฏ: 1.10ุ ุจุงุฒุฑฺฏุงู: 0.95ุ IT: 1.00

ููุงุฏุฑ ุดุงุฎุตโูุง (IndicatorValues) ุจุฑุง ูุฑ ฺฏุฑูู ู ุดุงุฎุต โ ููุงุฏุฑ ุชุณุช ุจุฑุง ุดุจูโุณุงุฒ ุงฺฉุณู ููุฌูุฏ.
src/Irisa.SpecialBonus
 โโ Controllers/
 โ   โโ AuthController.cs
 โ   โโ Admin/
 โ   โ   โโ RewardPeriodsController.cs
 โ   โ   โโ SpecialtyGroupsController.cs
 โ   โ   โโ IndicatorsController.cs
 โ   โ   โโ IndicatorValuesController.cs
 โ   โ   โโ RewardCalculationController.cs
 โ   โโ ...
 โโ Domain/
 โ   โโ Entities/
 โ   โโ Interfaces/
 โ   โโ ...
 โโ Persistence/
 โ   โโ Identity/
 โ   โ   โโ ApplicationUser.cs
 โ   โ   โโ ApplicationRole.cs
 โ   โ   โโ ApplicationDbContext.cs
 โ   โโ Seed/
 โ   โ   โโ DatabaseSeeder.cs
 โ   โโ ...
 โโ wwwroot/
     โโ css/
     โ   โโ styles.css
     โโ js/
     โ   โโ api.js
     โ   โโ auth.js
     โ   โโ ui.js
     โโ pages/
         โโ login.html
         โโ dashboard.html
         โโ reward-periods.html
         โโ indicators.html
         โโ indicator-values.html
         โโ reward-calculation.html
         โโ groups.html
